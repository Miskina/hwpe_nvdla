package:
  name: hwpe_nvdla
  authors:
    - "Luka Macan <luka.macan@fer.hr>"
    - "Mihael Kovaƒç <mihael.kovac@fer.hr>"

dependencies:
  axi2mem: { git: "https://github.com/pulp-platform/axi2mem.git", version: latest }

sources:

  - include_dirs:
    - nvdla_hw
    - nvdla_hw/vmod
    - nvdla_hw/vmod/include
    - nvdla_hw/vmod/vlibs
    - nvdla_hw/vmod/nvdla
    - nvdla_hw/vmod/nvdla/bdma
    - nvdla_hw/vmod/nvdla/cacc
    - nvdla_hw/vmod/nvdla/car
    - nvdla_hw/vmod/nvdla/cbuf
    - nvdla_hw/vmod/nvdla/cdma
    - nvdla_hw/vmod/nvdla/cdp
    - nvdla_hw/vmod/nvdla/cfgrom
    - nvdla_hw/vmod/nvdla/cmac
    - nvdla_hw/vmod/nvdla/csb_master
    - nvdla_hw/vmod/nvdla/csc
    - nvdla_hw/vmod/nvdla/glb
    - nvdla_hw/vmod/nvdla/nocif
    - nvdla_hw/vmod/nvdla/pdp
    - nvdla_hw/vmod/nvdla/retiming
    - nvdla_hw/vmod/nvdla/rubik
    - nvdla_hw/vmod/nvdla/sdp
    - nvdla_hw/vmod/nvdla/top

    defines:
      - NVDLA_FEATURE_DATA_TYPE_INT8: ~
      - NVDLA_BPE: 8
      - NVDLA_WEIGHT_DATA_TYPE_INT8: ~
      - NVDLA_SDP_BS_ENABLE: ~
      - NVDLA_SDP_BN_ENABLE: ~
      - NVDLA_PDP_ENABLE: ~
      - NVDLA_CDP_ENABLE: ~
      - NVDLA_MAC_ATOMIC_C_SIZE: 8
      - NVDLA_MAC_ATOMIC_K_SIZE: 8
      - NVDLA_MEMORY_ATOMIC_SIZE: 8
      - NVDLA_CBUF_BANK_NUMBER: 32
      - NVDLA_CBUF_BANK_WIDTH: 8
      - NVDLA_CBUF_BANK_DEPTH: 512
      - NVDLA_SDP_BS_THROUGHPUT: 1
      - NVDLA_SDP_BN_THROUGHPUT: 1
      - NVDLA_SDP_EW_THROUGHPUT: 0
      - NVDLA_SDP_MAX_THROUGHPUT: 1
      - NVDLA_SDP2PDP_WIDTH: 8
      - NVDLA_PDP_THROUGHPUT: 1
      - NVDLA_CDP_THROUGHPUT: 1
      - NVDLA_PRIMARY_MEMIF_LATENCY: 50
      - NVDLA_PRIMARY_MEMIF_MAX_BURST_LENGTH: 1
      - NVDLA_PRIMARY_MEMIF_WIDTH: 64
      - NVDLA_SECONDARY_MEMIF_WIDTH: 512
      - NVDLA_MEM_ADDRESS_WIDTH: 32
      - NVDLA_MEMIF_WIDTH: 64
      - NVDLA_DMA_RD_SIZE: 15
      - NVDLA_DMA_WR_SIZE: 13
      - NVDLA_DMA_MASK_BIT: 1
      - NVDLA_DMA_RD_RSP: 65
      - NVDLA_DMA_WR_REQ: 66
      - NVDLA_DMA_WR_CMD: 46
      - NVDLA_DMA_RD_REQ: 47
      - NVDLA_MEMORY_ATOMIC_LOG2: 3
      - NVDLA_PRIMARY_MEMIF_WIDTH_LOG2: 3
      - NVDLA_SECONDARY_MEMIF_WIDTH_LOG2: 6
      - NVDLA_NUM_DMA_READ_CLIENTS: 7
      - NVDLA_NUM_DMA_WRITE_CLIENTS: 3
      - NVDLA_MAC_ATOMIC_C_SIZE_LOG2: 3
      - NVDLA_MAC_ATOMIC_K_SIZE_LOG2: 3
      - NVDLA_CBUF_BANK_NUMBER_LOG2: 5
      - NVDLA_CBUF_BANK_WIDTH_LOG2: 3
      - NVDLA_CBUF_BANK_DEPTH_LOG2: 9
      - NVDLA_CBUF_DEPTH_LOG2: 14
      - NVDLA_CBUF_ENTRY_WIDTH: 64
      - NVDLA_CBUF_WIDTH_LOG2: 6
      - NVDLA_CBUF_WIDTH_MUL2_LOG2: 7
      - NVDLA_BPE_LOG2: 3
      - NVDLA_MAC_RESULT_WIDTH: 19
      - NVDLA_CC_ATOMC_DIV_ATOMK: 1
      - PRAND_OFF: ~
      # - FIFOGEN_MASTER_CLK_GATING_DISABLED: ~
    
    target: any(nvdla, rtl)

    files:
      - AN2D4PO4.v
      - CKLNQD12.v
      - CKLNQD12PO4.v
      - HLS_cdp_icvt.v
      - HLS_cdp_ocvt.v
      - HLS_fp16_to_fp17.v
      - HLS_fp16_to_fp32.v
      - HLS_fp17_add.v
      - HLS_fp17_mul.v
      - HLS_fp17_sub.v
      - HLS_fp17_to_fp16.v
      - HLS_fp17_to_fp32.v
      - HLS_fp32_add.v
      - HLS_fp32_mul.v
      - HLS_fp32_sub.v
      - HLS_fp32_to_fp16.v
      - HLS_fp32_to_fp17.v
      - HLS_uint16_to_fp17.v
      - LNQD1PO4.v
      - MUX2D4.v
      - MUX2HDD2.v
      - NV_BLKBOX_BUFFER.v
      - NV_BLKBOX_SINK.v
      - NV_BLKBOX_SRC0.v
      - NV_BLKBOX_SRC0_X.v
      - NV_CLK_gate_power.v
      - NV_DW02_tree.v
      - NV_DW_lsd.v
      - NV_DW_minmax.v
      - NV_NVDLA_CDP_HLS_icvt.v
      - NV_NVDLA_CDP_HLS_ocvt.v
      - NV_NVDLA_HLS_saturate.v
      - NV_NVDLA_HLS_shiftleftsu.v
      - NV_NVDLA_HLS_shiftrightsatsu.v
      - NV_NVDLA_HLS_shiftrightss.v
      - NV_NVDLA_HLS_shiftrightsu.v
      - NV_NVDLA_HLS_shiftrightusz.v
      - OR2D1.v
      - PGAOPV_AN2D2PO4.v
      - PGAOPV_DFCNQD2PO4.v
      - PGAOPV_INVD2PO4.v
      - RANDFUNC.vlib
      - SDFCNQD1.v
      - SDFQD1.v
      - SDFSNQD1.v
      - ScanShareSel_JTAG_reg_ext_cg.v
      - assertion_header.vh
      - assertion_task.vh
      - no_lib_cells.vlib
      - nv_assert_always.vlib
      - nv_assert_at_time_interval.vlib
      - nv_assert_fifo.vlib
      - nv_assert_hold_throughout_event_interval.vlib
      - nv_assert_never.vlib
      - nv_assert_no_x.vlib
      - nv_assert_one_hot.vlib
      - nv_assert_vld_credit_max.vlib
      - nv_assert_zero_one_hot.vlib
      - oneHotClk_async_read_clock.v
      - oneHotClk_async_write_clock.v
      - p_SDFCNQD1PO4.v
      - p_SSYNC2DO_C_PP.v
      - p_SSYNC3DO.v
      - p_SSYNC3DO_C_PPP.v
      - p_SSYNC3DO_S_PPP.v
      - p_STRICTSYNC3DOTM_C_PPP.v
      - sync2d_c_pp.v
      - sync3d.v
      - sync3d_c_ppp.v
      - sync3d_s_ppp.v
      - sync_reset.v
      - NV_HWACC_tick_defines.vh
      - NV_NVDLA_define.h
      - simulate_x_tick.vh
      - NV_NVDLA_BDMA_cq.v
      - NV_NVDLA_BDMA_csb.v
      - NV_NVDLA_BDMA_gate.v
      - NV_NVDLA_BDMA_load.v
      - NV_NVDLA_BDMA_reg.v
      - NV_NVDLA_BDMA_store.v
      - NV_NVDLA_bdma.v
      - NV_NVDLA_CACC.h
      - NV_NVDLA_CACC_CALC_int8.v
      - NV_NVDLA_CACC_assembly_buffer.v
      - NV_NVDLA_CACC_assembly_ctrl.v
      - NV_NVDLA_CACC_calculator.v
      - NV_NVDLA_CACC_delivery_buffer.v
      - NV_NVDLA_CACC_delivery_ctrl.v
      - NV_NVDLA_CACC_dual_reg.v
      - NV_NVDLA_CACC_regfile.v
      - NV_NVDLA_CACC_single_reg.v
      - NV_NVDLA_CACC_slcg.v
      - NV_NVDLA_cacc.v
      - NV_NVDLA_core_reset.v
      - NV_NVDLA_reset.v
      - NV_NVDLA_ssync3d.v
      - NV_NVDLA_ssync3d_c.v
      - NV_NVDLA_sync3d.v
      - NV_NVDLA_sync3d_c.v
      - NV_NVDLA_sync3d_s.v
      - NV_NVDLA_CBUF.h
      - NV_NVDLA_cbuf.v
      - NV_NVDLA_CDMA_CVT_cell.v
      - NV_NVDLA_CDMA_DC_fifo.v
      - NV_NVDLA_CDMA_IMG_ctrl.v
      - NV_NVDLA_CDMA_IMG_fifo.v
      - NV_NVDLA_CDMA_IMG_pack.v
      - NV_NVDLA_CDMA_IMG_sg.v
      - NV_NVDLA_CDMA_IMG_sg2pack_fifo.v
      - NV_NVDLA_CDMA_WG_fifo.v
      - NV_NVDLA_CDMA_WT_fifo.v
      - NV_NVDLA_CDMA_WT_sp_arb.v
      - NV_NVDLA_CDMA_WT_wgs_fifo.v
      - NV_NVDLA_CDMA_WT_wrr_arb.v
      - NV_NVDLA_CDMA_cvt.v
      - NV_NVDLA_CDMA_dc.v
      - NV_NVDLA_CDMA_define.h
      - NV_NVDLA_CDMA_dma_mux.v
      - NV_NVDLA_CDMA_dual_reg.v
      - NV_NVDLA_CDMA_img.v
      - NV_NVDLA_CDMA_regfile.v
      - NV_NVDLA_CDMA_shared_buffer.v
      - NV_NVDLA_CDMA_single_reg.v
      - NV_NVDLA_CDMA_slcg.v
      - NV_NVDLA_CDMA_status.v
      - NV_NVDLA_CDMA_wg.v
      - NV_NVDLA_CDMA_wt.v
      - NV_NVDLA_cdma.swl
      - NV_NVDLA_cdma.v
      - NV_NVDLA_CDP_DP_INTP_unit.v
      - NV_NVDLA_CDP_DP_LUT_CTRL_unit.v
      - NV_NVDLA_CDP_DP_LUT_ctrl.v
      - NV_NVDLA_CDP_DP_MUL_unit.v
      - NV_NVDLA_CDP_DP_bufferin.v
      - NV_NVDLA_CDP_DP_bufferin_tp1.v
      - NV_NVDLA_CDP_DP_cvtin.v
      - NV_NVDLA_CDP_DP_cvtout.v
      - NV_NVDLA_CDP_DP_intp.v
      - NV_NVDLA_CDP_DP_lut.v
      - NV_NVDLA_CDP_DP_mul.v
      - NV_NVDLA_CDP_DP_nan.v
      - NV_NVDLA_CDP_DP_sum.v
      - NV_NVDLA_CDP_DP_syncfifo.v
      - NV_NVDLA_CDP_RDMA_REG_dual.v
      - NV_NVDLA_CDP_RDMA_REG_single.v
      - NV_NVDLA_CDP_RDMA_cq.v
      - NV_NVDLA_CDP_RDMA_eg.v
      - NV_NVDLA_CDP_RDMA_ig.v
      - NV_NVDLA_CDP_RDMA_reg.v
      - NV_NVDLA_CDP_REG_dual.v
      - NV_NVDLA_CDP_REG_single.v
      - NV_NVDLA_CDP_define.h
      - NV_NVDLA_CDP_dp.v
      - NV_NVDLA_CDP_rdma.v
      - NV_NVDLA_CDP_reg.v
      - NV_NVDLA_CDP_slcg.v
      - NV_NVDLA_CDP_wdma.v
      - NV_NVDLA_cdp.v
      - fp_format_cvt.v
      - fp_sum_block.v
      - int_sum_block.v
      - int_sum_block_tp1.v
      - NV_NVDLA_CFGROM_rom.v
      - NV_NVDLA_cfgrom.v
      - NV_NVDLA_CMAC.h
      - NV_NVDLA_CMAC_CORE_active.v
      - NV_NVDLA_CMAC_CORE_cfg.v
      - NV_NVDLA_CMAC_CORE_mac.v
      - NV_NVDLA_CMAC_CORE_rt_in.v
      - NV_NVDLA_CMAC_CORE_rt_out.v
      - NV_NVDLA_CMAC_CORE_slcg.v
      - NV_NVDLA_CMAC_REG_dual.v
      - NV_NVDLA_CMAC_REG_single.v
      - NV_NVDLA_CMAC_core.v
      - NV_NVDLA_CMAC_reg.v
      - NV_NVDLA_cmac.v
      - NV_NVDLA_CSB_MASTER_csb2falcon_fifo.v
      - NV_NVDLA_CSB_MASTER_falcon2csb_fifo.v
      - NV_NVDLA_csb_master.v
      - NV_NVDLA_CSC.h
      - NV_NVDLA_CSC_SG_dat_fifo.v
      - NV_NVDLA_CSC_SG_wt_fifo.v
      - NV_NVDLA_CSC_WL_dec.v
      - NV_NVDLA_CSC_dl.v
      - NV_NVDLA_CSC_dual_reg.v
      - NV_NVDLA_CSC_pra_cell.v
      - NV_NVDLA_CSC_regfile.v
      - NV_NVDLA_CSC_sg.v
      - NV_NVDLA_CSC_single_reg.v
      - NV_NVDLA_CSC_slcg.v
      - NV_NVDLA_CSC_wl.v
      - NV_NVDLA_csc.swl
      - NV_NVDLA_csc.v
      - NV_NVDLA_GLB_CSB_reg.v
      - NV_NVDLA_GLB_csb.v
      - NV_NVDLA_GLB_fc.v
      - NV_NVDLA_GLB_ic.v
      - NV_NVDLA_glb.v
      - NV_NVDLA_DMAIF_rdreq.v
      - NV_NVDLA_DMAIF_rdrsp.v
      - NV_NVDLA_DMAIF_wr.v
      - NV_NVDLA_MCIF_CSB_reg.v
      - NV_NVDLA_MCIF_csb.v
      - NV_NVDLA_NOCIF_DRAM_READ_IG_arb.v
      - NV_NVDLA_NOCIF_DRAM_READ_IG_bpt.v
      - NV_NVDLA_NOCIF_DRAM_READ_IG_cvt.v
      - NV_NVDLA_NOCIF_DRAM_READ_IG_spt.v
      - NV_NVDLA_NOCIF_DRAM_READ_cq.v
      - NV_NVDLA_NOCIF_DRAM_READ_eg.v
      - NV_NVDLA_NOCIF_DRAM_READ_ig.v
      - NV_NVDLA_NOCIF_DRAM_WRITE_IG_arb.v
      - NV_NVDLA_NOCIF_DRAM_WRITE_IG_bpt.v
      - NV_NVDLA_NOCIF_DRAM_WRITE_IG_cvt.v
      - NV_NVDLA_NOCIF_DRAM_WRITE_IG_spt.v
      - NV_NVDLA_NOCIF_DRAM_WRITE_cq.v
      - NV_NVDLA_NOCIF_DRAM_WRITE_eg.v
      - NV_NVDLA_NOCIF_DRAM_WRITE_ig.v
      - NV_NVDLA_NOCIF_DRAM_read.v
      - NV_NVDLA_NOCIF_DRAM_write.v
      - NV_NVDLA_NOCIF_dram.v
      - NV_NVDLA_XXIF_libs.v
      - NV_NVDLA_nocif.swl
      - NV_NVDLA_nocif.v
      - NV_NVDLA_PDP_CORE_cal1d.v
      - NV_NVDLA_PDP_CORE_cal2d.v
      - NV_NVDLA_PDP_CORE_preproc.v
      - NV_NVDLA_PDP_CORE_unit1d.v
      - NV_NVDLA_PDP_RDMA_REG_dual.v
      - NV_NVDLA_PDP_RDMA_REG_single.v
      - NV_NVDLA_PDP_RDMA_cq.v
      - NV_NVDLA_PDP_RDMA_eg.v
      - NV_NVDLA_PDP_RDMA_ig.v
      - NV_NVDLA_PDP_RDMA_reg.v
      - NV_NVDLA_PDP_REG_dual.v
      - NV_NVDLA_PDP_REG_single.v
      - NV_NVDLA_PDP_WDMA_cmd.v
      - NV_NVDLA_PDP_WDMA_dat.v
      - NV_NVDLA_PDP_core.v
      - NV_NVDLA_PDP_define.h
      - NV_NVDLA_PDP_nan.v
      - NV_NVDLA_PDP_rdma.v
      - NV_NVDLA_PDP_reg.v
      - NV_NVDLA_PDP_slcg.v
      - NV_NVDLA_PDP_wdma.v
      - NV_NVDLA_pdp.v
      - cal1d_fp16_pool_sum.v
      - fp16_4add.v
      - NV_NVDLA_RT_cacc2glb.v
      - NV_NVDLA_RT_cmac_a2cacc.v
      - NV_NVDLA_RT_cmac_b2cacc.v
      - NV_NVDLA_RT_csb2cacc.v
      - NV_NVDLA_RT_csb2cmac.v
      - NV_NVDLA_RT_csc2cmac_a.v
      - NV_NVDLA_RT_csc2cmac_b.v
      - NV_NVDLA_RT_sdp2nocif.v
      - NV_NVDLA_RUBIK_dma.v
      - NV_NVDLA_RUBIK_dr2drc.v
      - NV_NVDLA_RUBIK_dual_reg.v
      - NV_NVDLA_RUBIK_fifo.v
      - NV_NVDLA_RUBIK_intr.v
      - NV_NVDLA_RUBIK_regfile.v
      - NV_NVDLA_RUBIK_rf_core.v
      - NV_NVDLA_RUBIK_rf_ctrl.v
      - NV_NVDLA_RUBIK_rf_rcmd.v
      - NV_NVDLA_RUBIK_rf_wcmd.v
      - NV_NVDLA_RUBIK_seq_gen.v
      - NV_NVDLA_RUBIK_single_reg.v
      - NV_NVDLA_RUBIK_slcg.v
      - NV_NVDLA_RUBIK_wr_req.v
      - NV_NVDLA_RUBIK_wrdma_cmd.v
      - NV_NVDLA_RUBIK_wrdma_data.v
      - NV_NVDLA_rubik.v
      - NV_NVDLA_SDP_BRDMA_cq.v
      - NV_NVDLA_SDP_BRDMA_gate.v
      - NV_NVDLA_SDP_BRDMA_lat_fifo.v
      - NV_NVDLA_SDP_CORE_Y_lut.v
      - NV_NVDLA_SDP_CORE_gate.v
      - NV_NVDLA_SDP_CORE_pack.v
      - NV_NVDLA_SDP_CORE_unpack.v
      - NV_NVDLA_SDP_CORE_y.v
      - NV_NVDLA_SDP_ERDMA_cq.v
      - NV_NVDLA_SDP_ERDMA_gate.v
      - NV_NVDLA_SDP_ERDMA_lat_fifo.v
      - NV_NVDLA_SDP_HLS_C_int.v
      - NV_NVDLA_SDP_HLS_X_int_alu.v
      - NV_NVDLA_SDP_HLS_X_int_mul.v
      - NV_NVDLA_SDP_HLS_X_int_relu.v
      - NV_NVDLA_SDP_HLS_X_int_trt.v
      - NV_NVDLA_SDP_HLS_Y_cvt_top.v
      - NV_NVDLA_SDP_HLS_Y_idx_top.v
      - NV_NVDLA_SDP_HLS_Y_inp_top.v
      - NV_NVDLA_SDP_HLS_Y_int_alu.v
      - NV_NVDLA_SDP_HLS_Y_int_core.v
      - NV_NVDLA_SDP_HLS_Y_int_cvt.v
      - NV_NVDLA_SDP_HLS_Y_int_idx.v
      - NV_NVDLA_SDP_HLS_Y_int_inp.v
      - NV_NVDLA_SDP_HLS_Y_int_mul.v
      - NV_NVDLA_SDP_HLS_c.v
      - NV_NVDLA_SDP_HLS_lut_expn.v
      - NV_NVDLA_SDP_HLS_lut_line.v
      - NV_NVDLA_SDP_HLS_prelu.v
      - NV_NVDLA_SDP_HLS_relu.v
      - NV_NVDLA_SDP_HLS_sync2data.v
      - NV_NVDLA_SDP_HLS_x1_int.v
      - NV_NVDLA_SDP_HLS_x2_int.v
      - NV_NVDLA_SDP_MRDMA_EG_cmd.v
      - NV_NVDLA_SDP_MRDMA_EG_din.v
      - NV_NVDLA_SDP_MRDMA_EG_dout.v
      - NV_NVDLA_SDP_MRDMA_cq.v
      - NV_NVDLA_SDP_MRDMA_eg.v
      - NV_NVDLA_SDP_MRDMA_gate.v
      - NV_NVDLA_SDP_MRDMA_ig.v
      - NV_NVDLA_SDP_NRDMA_cq.v
      - NV_NVDLA_SDP_NRDMA_gate.v
      - NV_NVDLA_SDP_NRDMA_lat_fifo.v
      - NV_NVDLA_SDP_RDMA_EG_ro.v
      - NV_NVDLA_SDP_RDMA_REG_dual.v
      - NV_NVDLA_SDP_RDMA_REG_single.v
      - NV_NVDLA_SDP_RDMA_dmaif.v
      - NV_NVDLA_SDP_RDMA_eg.v
      - NV_NVDLA_SDP_RDMA_ig.v
      - NV_NVDLA_SDP_RDMA_pack.v
      - NV_NVDLA_SDP_RDMA_reg.v
      - NV_NVDLA_SDP_RDMA_unpack.v
      - NV_NVDLA_SDP_REG_dual.v
      - NV_NVDLA_SDP_REG_single.v
      - NV_NVDLA_SDP_WDMA_DAT_in.v
      - NV_NVDLA_SDP_WDMA_DAT_out.v
      - NV_NVDLA_SDP_WDMA_cmd.v
      - NV_NVDLA_SDP_WDMA_dat.v
      - NV_NVDLA_SDP_WDMA_gate.v
      - NV_NVDLA_SDP_WDMA_intr.v
      - NV_NVDLA_SDP_WDMA_unpack.v
      - NV_NVDLA_SDP_brdma.v
      - NV_NVDLA_SDP_cmux.v
      - NV_NVDLA_SDP_core.v
      - NV_NVDLA_SDP_define.h
      - NV_NVDLA_SDP_erdma.v
      - NV_NVDLA_SDP_mrdma.v
      - NV_NVDLA_SDP_nrdma.v
      - NV_NVDLA_SDP_rdma.v
      - NV_NVDLA_SDP_reg.v
      - NV_NVDLA_SDP_wdma.v
      - NV_NVDLA_sdp.swl
      - NV_NVDLA_sdp.v
      - NV_NVDLA_define.h
      - NV_NVDLA_partition_a.v
      - NV_NVDLA_partition_c.v
      - NV_NVDLA_partition_m.v
      - NV_NVDLA_partition_o.v
      - NV_NVDLA_partition_p.v
      - NV_nvdla.v



  - include_dirs:
    - intf
    - src

    defines:

    target: rtl
    files:
      - hwpe_ctrl_intf_periph.sv
      - nvdla_csb_intf.sv
      - nvdla_dbb_intf.sv
      - periph_to_csb.sv
      - nvdla.sv
      - hwpe_nvdla.sv
